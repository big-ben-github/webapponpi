<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="utf-8">
    <!--Import Google Icon Font-->
    <link href="/static/css/fonts.css" rel="stylesheet">
    <!--Import materialize.css-->
    <link type="text/css" rel="stylesheet" href="/static/css/materialize.min.css" media="screen,projection" />

    <!--Let browser know website is optimized for mobile-->
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

</head>

<body>
    <header>
        <div class="navbar-fixed">
            <nav class="nav-extended teal lighten-2">
                <div class="nav-wrapper teal lighten-2">
                    <a href="#" class="brand-logo">HOME IOT</a>
                    <a href="#" data-target="slide-out" class="sidenav-trigger"><i class="material-icons">menu</i></a>
                </div>
                <div class="nav-content">
                    <ul class="tabs tabs-transparent">
                        <li class="tab"><a class="active" href="#test1">INDEX</a></li>
                        <li class="tab"><a href="#test2">NULL</a></li>
                        <li class="tab"><a href="#test3">NULL</a></li>
                        <li class="tab"><a href="#test4">NULL</a></li>
                    </ul>
                </div>
            </nav>
        </div>

        <ul id="slide-out" class="sidenav">
            <li>
                <div class="user-view">
                    <div class="background">
                        <img src="/static/images/office.jpg">
                    </div>
                    <a href="#user"><img class="circle" src="/static/images/user.png"></a>
                    <a href="#name"><span class="white-text name">John Doe</span></a>
                    <a href="#email"><span class="white-text email">jdandturk@gmail.com</span></a>
                </div>
            </li>
            <li><a href="#!"><i class="material-icons">cloud</i>First Link With Icon</a></li>
            <li><a href="#!">Second Link</a></li>
            <li>
                <div class="divider"></div>
            </li>
            <li><a class="subheader">Subheader</a></li>
            <li><a class="waves-effect" href="#!">Third Link With Waves</a></li>
        </ul>
        <a href="#" data-target="slide-out" class="sidenav-trigger"><i class="material-icons">menu</i></a>

        <br /><br />
    </header>

    <section>
        <div id="test1" class="col s12">
            <div class="container">
                <div class="card horizontal">
                    <div class="card-image">
                        <img id="ledimage" src="static/images/ledoff.png">
                    </div>
                    <div class="card-stacked">
                        <div class="card-content">
                            <h6>You can control the LED to turn it on or off with the button below.<h6>
                                    </h1>
                        </div>
                        <div class="card-action">
                            <a id="togglebutton" class="waves-effect waves-light btn" onclick="toggleled()">
                                OFF
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div id="test2" class="row">
            <div class="container">
                <div class="col s12 m6">
                    <div class="card hoverable small">
                        <div class="card-image">
                            <img src="/static/images/sample-1.jpg">
                            <span class="card-title">Scenery</span>
                        </div>
                        <div class="card-content">
                            <p> Murmur,a little sadly,how Love fled
                                And paced upon the mountains overhead
                                And hid his face amid a crowd of stars </p>
                        </div>
                        <div class="card-action">
                            <a href="#">This is a link</a>
                        </div>
                    </div>
                </div>

                <div class="col s12 m6">
                    <div class="card small">
                        <div class="card-image">
                            <img src="/static/images/sample-1.jpg">
                            <span class="card-title">Card Title</span>
                        </div>
                        <div class="card-content">
                            <p> Murmur,a little sadly,how Love fled
                                And paced upon the mountains overhead
                                And hid his face amid a crowd of stars </p>
                        </div>
                        <div class="card-action">
                            <a href="#">This is a link</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div id="test3" class="col s12">
            <br />
            <a class="waves-effect waves-light btn" onclick="M.toast({html: 'I am a toast'})">Toast!</a>
        </div>

        <div id="test4" class="col s12">
        </div>

    </section>

    <footer></footer>

    <!--JavaScript at end of body for optimized loading-->
    <script type="text/javascript" src="/static/js/materialize.min.js"></script>
    <script>
        M.AutoInit();
        var ledstatus = false;
        function toggleled() {
            ledstatus = !ledstatus;
            var xhr = new XMLHttpRequest();
            xhr.open('post', "{{ url_for('index.toggleled') }}");
            xhr.setRequestHeader("Content-type", "application/json");
            xhr.send(JSON.stringify({ 'status': ledstatus }));
            xhr.onreadystatechange = function () {
                if (xhr.readyState == 4 && xhr.status == 200) {
                    console.log(xhr.responseText);
                    var responsedata = JSON.parse(xhr.responseText);
                    if (responsedata != 'fail') {
                        document.getElementById('togglebutton').innerHTML = responsedata.result;
                        document.getElementById('ledimage').src
                            = (responsedata.result == 'O N') ? "static/images/ledon.png" : "static/images/ledoff.png";
                    }
                }
            };
        }
    </script>
</body>

</html>